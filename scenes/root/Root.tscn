[gd_scene load_steps=11 format=3 uid="uid://c60kwat0su1y"]

[ext_resource type="Script" path="res://scenes/root/Root.gd" id="1"]
[ext_resource type="Script" path="res://addons/onscreenkeyboard/onscreen_keyboard.gd" id="2"]
[ext_resource type="PackedScene" uid="uid://cjx4cfx0f2k2" path="res://scenes/config/ConfigPopup.tscn" id="3"]
[ext_resource type="Script" path="res://scenes/root/Viewport.gd" id="4"]
[ext_resource type="Theme" uid="uid://jtuqhw3am1h3" path="res://resources/default_theme.tres" id="5"]
[ext_resource type="Script" path="res://scenes/root/FileSystemPopup.gd" id="6"]
[ext_resource type="Script" path="res://addons/godot-accessibility/ScreenReader.gd" id="7"]
[ext_resource type="PackedScene" uid="uid://dmcmcyq0jach5" path="res://scenes/no_theme/NoTheme.tscn" id="10"]

[sub_resource type="Shader" id="1"]
code = "// Source: https://kidscancode.org/godot_recipes/shaders/blur/

shader_type canvas_item;

uniform float blur_amount : hint_range(0, 5);
uniform sampler2D SCREEN_TEXTURE : hint_screen_texture, filter_linear_mipmap;

void fragment() {
	COLOR = textureLod(SCREEN_TEXTURE, SCREEN_UV, blur_amount);
}"

[sub_resource type="ShaderMaterial" id="2"]
shader = SubResource("1")
shader_parameter/blur_amount = null

[node name="Root" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
stretch = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(1152, 576)
size_2d_override_stretch = true
render_target_update_mode = 4
script = ExtResource("4")

[node name="NoTheme" parent="SubViewportContainer/SubViewport" instance=ExtResource("10")]
focus_mode = 2

[node name="DarkenOverlay" type="ColorRect" parent="."]
visible = false
modulate = Color(0.74902, 0.74902, 0.74902, 1)
material = SubResource("2")
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
focus_mode = 2

[node name="ConfigPopup" parent="." instance=ExtResource("3")]
position = Vector2i(0, 50)
exclusive = true

[node name="FileSystemPopup" type="FileDialog" parent="."]
size = Vector2i(1066, 176)
theme = ExtResource("5")
access = 2
script = ExtResource("6")

[node name="WarningPopup" type="AcceptDialog" parent="."]
unique_name_in_owner = true
theme = ExtResource("5")

[node name="WarningLabel" type="Label" parent="WarningPopup"]
unique_name_in_owner = true
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
offset_top = 8.0
offset_right = -8.0
offset_bottom = -44.0
text = "
"

[node name="Keyboard" type="PopupPanel" parent="."]
unique_name_in_owner = true
theme = ExtResource("5")
script = ExtResource("2")
autoShow = false

[node name="ScreenReader" type="Node" parent="."]
process_mode = 2
script = ExtResource("7")
theme_viewport = NodePath("../SubViewportContainer/SubViewport")

[connection signal="about_to_popup" from="ConfigPopup" to="." method="opened_popup"]
[connection signal="popup_hide" from="ConfigPopup" to="." method="closed_popup"]
[connection signal="about_to_popup" from="FileSystemPopup" to="." method="opened_popup"]
