[gd_scene load_steps=18 format=3 uid="uid://dttv4ou2ow347"]

[ext_resource type="Script" path="res://scenes/popups/scraper/ScraperPopup.gd" id="1"]
[ext_resource type="Script" path="res://scenes/popups/scraper/Waiting.gd" id="2"]
[ext_resource type="PackedScene" path="res://scenes/config/GameMetadataEditor.tscn" id="3"]
[ext_resource type="PackedScene" path="res://scenes/popups/scraper/SystemEntry.tscn" id="4"]
[ext_resource type="Script" path="res://scenes/popups/scraper/Success.gd" id="5"]
[ext_resource type="FontFile" path="res://resources/fonts/default_italic.tres" id="6"]
[ext_resource type="Script" path="res://scenes/popups/scraper/Working.gd" id="7"]
[ext_resource type="Script" path="res://scenes/popups/scraper/Warning.gd" id="8"]
[ext_resource type="Script" path="res://scenes/popups/scraper/Error.gd" id="9"]
[ext_resource type="Script" path="res://scenes/popups/scraper/StopScraperDialog.gd" id="10"]
[ext_resource type="FontFile" path="res://resources/fonts/default_bold.tres" id="11"]
[ext_resource type="Texture2D" uid="uid://dfth5p8xpsgmy" path="res://assets/icons/success.svg" id="12"]
[ext_resource type="Script" path="res://source/utils/ScrollHandler.gd" id="13"]
[ext_resource type="Texture2D" uid="uid://cvp0cekj3mjh0" path="res://assets/icons/loading.svg" id="14"]
[ext_resource type="Texture2D" uid="uid://1f52yl5g4qjs" path="res://assets/icons/warning.svg" id="15"]
[ext_resource type="Texture2D" uid="uid://ns5cbtxp13ft" path="res://assets/icons/error.svg" id="16"]
[ext_resource type="Script" path="res://scenes/popups/scraper/GameEntries.gd" id="17"]

[node name="ScraperPopup" type="PopupPanel"]
size = Vector2i(420, 100)
visible = true
exclusive = true
script = ExtResource("1")
system_entry_scene = ExtResource("4")

[node name="VBoxContainer" type="VBoxContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 4.0
offset_top = 4.0
offset_right = -4.0
offset_bottom = -4.0

[node name="HBoxContainer" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2

[node name="TextureRect" type="TextureRect" parent="VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
focus_mode = 2
texture = ExtResource("12")
expand_mode = 1
stretch_mode = 6

[node name="ScraperDone" type="Label" parent="VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "0"

[node name="TextureRect2" type="TextureRect" parent="VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
focus_mode = 2
texture = ExtResource("15")
expand_mode = 1
stretch_mode = 6

[node name="ScraperWarning" type="Label" parent="VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
text = "0"

[node name="TextureRect3" type="TextureRect" parent="VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
focus_mode = 2
texture = ExtResource("16")
expand_mode = 1
stretch_mode = 6

[node name="ScraperError" type="Label" parent="VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
text = "0"

[node name="TextureRect5" type="TextureRect" parent="VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(24, 24)
layout_mode = 2
focus_mode = 2
texture = ExtResource("14")
expand_mode = 1
stretch_mode = 6

[node name="ScraperPending" type="Label" parent="VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
text = "0"

[node name="VSeparator" type="VSeparator" parent="VBoxContainer/HBoxContainer"]
layout_mode = 2

[node name="ScraperDetails" type="Label" parent="VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2
clip_text = true

[node name="HSeparator" type="HSeparator" parent="VBoxContainer"]
layout_mode = 2

[node name="HBoxContainer2" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ScrollContainer" type="ScrollContainer" parent="VBoxContainer/HBoxContainer2"]
custom_minimum_size = Vector2(400, 0)
layout_mode = 2
follow_focus = true

[node name="GameEntries" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
focus_mode = 2
script = ExtResource("17")

[node name="ScrollHandler" type="Control" parent="VBoxContainer/HBoxContainer2/ScrollContainer"]
layout_mode = 2
script = ExtResource("13")

[node name="VSeparator" type="VSeparator" parent="VBoxContainer/HBoxContainer2"]
layout_mode = 2

[node name="GameEntryEditor" type="TabContainer" parent="VBoxContainer/HBoxContainer2"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
focus_mode = 2
tabs_visible = false

[node name="Success" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor"]
layout_mode = 2
script = ExtResource("5")

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success/VBoxContainer"]
layout_mode = 2
text = "Scrape completed. You may confirm the game's metadata below, and edit after finishing scraping."

[node name="HSeparator" type="HSeparator" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success/VBoxContainer"]
layout_mode = 2

[node name="Root" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="GameMetadataEditor" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success/VBoxContainer/Root" instance=ExtResource("3")]
unique_name_in_owner = true
anchors_preset = 0
disable_edits = true

[node name="NoData" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Success/VBoxContainer/Root"]
unique_name_in_owner = true
visible = false
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
focus_mode = 2
theme_override_fonts/font = ExtResource("6")
text = "Metadata was not scraped"

[node name="Working" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor"]
visible = false
layout_mode = 2
script = ExtResource("7")

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Working"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 150.0
offset_bottom = -156.0

[node name="WorkingLabel" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Working/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
theme_override_fonts/font = ExtResource("6")

[node name="WorkingProgress" type="ProgressBar" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Working/VBoxContainer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(150, 0)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 2
focus_mode = 2
step = 1.0

[node name="WorkingCancelButton" type="Button" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Working/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 4
text = "Cancel"

[node name="Waiting" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor"]
visible = false
layout_mode = 2
script = ExtResource("2")

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Waiting"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 150.0
offset_bottom = -156.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Waiting" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Waiting/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 6
focus_mode = 2
theme_override_fonts/font = ExtResource("6")
text = "Waiting to be downloaded..."

[node name="WaitingCancelButton" type="Button" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Waiting/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 4
text = "Cancel"

[node name="Warning" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor"]
unique_name_in_owner = true
visible = false
layout_mode = 2
script = ExtResource("8")

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0

[node name="NoGamesLabel" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "This game could not be uniquely identified by the scraper. Indicate a search term to search for (use simple words and avoid special characters)."

[node name="MultipleGamesLabel" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
text = "This game could not be uniquely identified by the scraper. Select the correct entry below, or indicate a different search term (use simple words and avoid special characters)."

[node name="HBoxContainer" type="HBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer"]
layout_mode = 2

[node name="SearchField" type="LineEdit" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "Search term, such as game's title, franchise, etc..."

[node name="Search" type="Button" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
disabled = true
text = "Search"

[node name="HBoxContainer2" type="HBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ScrollContainer" type="ScrollContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Screenshot" type="TextureRect" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
focus_mode = 2
expand_mode = 1
stretch_mode = 6

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
custom_minimum_size = Vector2(108, 0)
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2
theme_override_fonts/font = ExtResource("11")
text = "Developer:"

[node name="Developer" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2

[node name="Label2" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
custom_minimum_size = Vector2(108, 0)
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2
theme_override_fonts/font = ExtResource("11")
text = "Publisher:"

[node name="Publisher" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2

[node name="Label3" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2
theme_override_fonts/font = ExtResource("11")
text = "Num players:"

[node name="NumPlayers" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer/HBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
focus_mode = 2

[node name="Name" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
theme_override_fonts/font = ExtResource("11")
text = "Game name"

[node name="Description" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/ScrollContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
focus_mode = 2
theme_override_fonts/font = ExtResource("6")
text = "Game description: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec quam nec ex tristique finibus. Pellentesque aliquet purus at aliquet sagittis. Donec vestibulum dui eros, ut gravida mauris euismod lacinia. Quisque pulvinar luctus sem, eu malesuada mi feugiat eget. Vivamus sit amet diam semper, rhoncus augue quis, volutpat felis. Ut augue justo, faucibus sed ligula a, tincidunt posuere quam. Proin aliquam mi vel lectus semper, id lacinia lorem rhoncus. Duis et sagittis turpis. Cras id augue nec lacus faucibus volutpat ultricies luctus lacus. Proin lobortis ornare nisl id tristique. Aliquam quis venenatis nibh. Aenean et imperdiet ante. Nunc libero diam, rutrum non arcu id, euismod ornare felis. Quisque fringilla massa massa, nec ullamcorper neque laoreet id. Nam commodo diam vitae rutrum molestie. "

[node name="HSeparator" type="VSeparator" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2"]
layout_mode = 2

[node name="ScrollContainer2" type="ScrollContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
size_flags_vertical = 3
follow_focus = true

[node name="GameSearchEntries" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer/ScrollContainer2"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ScrollHandler" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer/ScrollContainer2"]
layout_mode = 2
script = ExtResource("13")

[node name="HSeparator" type="HSeparator" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer"]
layout_mode = 2

[node name="Confirm" type="Button" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
disabled = true
text = "Confirm"

[node name="Error" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor"]
visible = false
layout_mode = 2
script = ExtResource("9")

[node name="VBoxContainer" type="VBoxContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Error"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 41.0
offset_bottom = -68.0

[node name="ScrollContainer" type="ScrollContainer" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Error/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ErrorLabel" type="Label" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Error/VBoxContainer/ScrollContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "There was an error when downloading information for
\"%s\":

%s"

[node name="ScrollHandler" type="Control" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Error/VBoxContainer/ScrollContainer"]
layout_mode = 2
script = ExtResource("13")

[node name="ErrorRetryButton" type="Button" parent="VBoxContainer/HBoxContainer2/GameEntryEditor/Error/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 6
size_flags_vertical = 0
text = "Retry"

[node name="HSeparator2" type="HSeparator" parent="VBoxContainer"]
layout_mode = 2

[node name="HBoxContainer3" type="HBoxContainer" parent="VBoxContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="PendingGames" type="Label" parent="VBoxContainer/HBoxContainer3"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 11
focus_mode = 2

[node name="Finish" type="Button" parent="VBoxContainer/HBoxContainer3"]
unique_name_in_owner = true
layout_mode = 2
text = "Finish"

[node name="StopScraperDialog" type="ConfirmationDialog" parent="."]
unique_name_in_owner = true
script = ExtResource("10")

[node name="StopDescription" type="Label" parent="StopScraperDialog"]
unique_name_in_owner = true
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
offset_top = 8.0
offset_right = -8.0
offset_bottom = -36.0
text = "There are still %d games waiting to be scraped.

If you cancel now, the existing metadata/media will still be saved, so some games
might show incomplete information.

Are you sure you wish to stop the scraping process?"

[connection signal="focus_entered" from="VBoxContainer/HBoxContainer2/ScrollContainer/GameEntries" to="VBoxContainer/HBoxContainer2/ScrollContainer/GameEntries" method="_on_GameEntries_focus_entered"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Working/VBoxContainer/WorkingCancelButton" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Working" method="_on_WorkingCancelButton_pressed"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Waiting/VBoxContainer/WaitingCancelButton" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Waiting" method="_on_WaitingCancelButton_pressed"]
[connection signal="text_changed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer/SearchField" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning" method="_on_SearchField_text_changed"]
[connection signal="text_submitted" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer/SearchField" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning" method="_on_SearchField_text_entered"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer/Search" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning" method="_on_Search_pressed"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning/VBoxContainer/HBoxContainer2/VBoxContainer/Confirm" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Warning" method="_on_Confirm_pressed"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer2/GameEntryEditor/Error/VBoxContainer/ErrorRetryButton" to="VBoxContainer/HBoxContainer2/GameEntryEditor/Error" method="_on_ErrorRetryButton_pressed"]
[connection signal="pressed" from="VBoxContainer/HBoxContainer3/Finish" to="." method="_on_Finish_pressed"]
[connection signal="confirmed" from="StopScraperDialog" to="." method="_on_StopScraperDialog_confirmed"]
